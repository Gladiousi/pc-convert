# PC Configurator

PC Configurator — это современное веб-приложение для сборки и сравнения конфигураций персональных компьютеров. Пользователи могут выбирать комплектующие, проверять их совместимость и сравнивать производительность двух сборок. Приложение включает панель администратора для управления пользователями и добавления новых компонентов, обеспечивая удобный интерфейс как для обычных пользователей, так и для администраторов.

Frontend построен на **React**, **TypeScript** и **Vite**, с использованием **Tailwind CSS** для стилизации и **Zustand** для управления состоянием. Backend использует **Prisma** и **PostgreSQL** для хранения данных. Проект оптимизирован для производительности, типобезопасности и удобства поддержки, с модульной структурой компонентов и строгими типами TypeScript.

## Возможности

- **Сравнение ПК**: Соберите две конфигурации ПК, проверьте совместимость комплектующих (сокет процессора, тип RAM, разъёмы видеокарты) и сравните их мощность.
- **Панель администратора**: Управляйте пользователями и добавляйте комплектующие через форму с выпадающими списками для стандартизированного ввода.
- **Аутентификация**: Безопасный доступ с использованием токенов для защищённых страниц (Сравнение и Админка).
- **Адаптивный дизайн**: Интерфейс оптимизирован для работы на десктопах и мобильных устройствах благодаря Tailwind CSS.
- **Типобезопасность**: Использование TypeScript для предотвращения ошибок на этапе разработки.
- **Быстрая разработка**: Vite обеспечивает горячую перезагрузку модулей (HMR) и быструю сборку.

## Технологический стек

- **Frontend**: React 19, TypeScript, Vite, Tailwind CSS, Zustand
- **Backend**: ExpressJS, Prisma ORM, PostgreSQL
- **Инструменты**: ESLint (с поддержкой типизации), Prettier

## Структура проекта. Frontend

```
📦src
 ┣ 📂components
 ┃ ┣ 📂admin
 ┃ ┃ ┣ 📜ComponentForm.tsx
 ┃ ┃ ┣ 📜ComponentManagement.tsx
 ┃ ┃ ┣ 📜TabSelector.tsx
 ┃ ┃ ┗ 📜UserManagement.tsx
 ┃ ┣ 📂common
 ┃ ┃ ┣ 📜Alert.tsx
 ┃ ┃ ┣ 📜Card.tsx
 ┃ ┃ ┣ 📜ErrorList.tsx
 ┃ ┃ ┣ 📜GradientButton.tsx
 ┃ ┃ ┣ 📜PageContainer.tsx
 ┃ ┃ ┣ 📜SectionHeading.tsx
 ┃ ┃ ┣ 📜Select.tsx
 ┃ ┃ ┗ 📜TabSelector.tsx
 ┃ ┣ 📂compare
 ┃ ┃ ┣ 📜ConfigResult.tsx
 ┃ ┃ ┣ 📜PCConfigForm.tsx
 ┃ ┃ ┗ 📜SocketSelector.tsx
 ┃ ┣ 📜Auth.tsx
 ┃ ┣ 📜Faq.tsx
 ┃ ┣ 📜Footer.tsx
 ┃ ┗ 📜Header.tsx
 ┣ 📂data
 ┃ ┣ 📜faq.ts
 ┃ ┣ 📜pc.ts
 ┃ ┗ 📜pcData.ts
 ┣ 📂hooks
 ┃ ┣ 📜useApi.ts
 ┃ ┣ 📜useComponentData.ts
 ┃ ┣ 📜useComponentOptions.ts
 ┃ ┗ 📜useForm.ts
 ┣ 📂interface
 ┃ ┣ 📜admin.ts
 ┃ ┣ 📜common.ts
 ┃ ┣ 📜compare.ts
 ┃ ┣ 📜hooks.ts
 ┃ ┣ 📜page.ts
 ┃ ┣ 📜pc.ts
 ┃ ┗ 📜store.ts
 ┣ 📂page
 ┃ ┣ 📜About.tsx
 ┃ ┣ 📜Admin.tsx
 ┃ ┣ 📜Assemble.tsx
 ┃ ┣ 📜Compare.tsx
 ┃ ┣ 📜Home.tsx
 ┃ ┗ 📜View.tsx
 ┣ 📂routes
 ┃ ┗ 📜main.tsx
 ┣ 📂store
 ┃ ┣ 📜activePage.ts
 ┃ ┗ 📜useTabStore.ts
 ┣ 📂utils
 ┃ ┣ 📜option.ts
 ┃ ┗ 📜page.ts
 ┣ 📜App.tsx
 ┣ 📜index.css
 ┣ 📜main.tsx
 ┗ 📜vite-env.d.ts
```

# Структура проекта. Backend

```bash
prisma
 ┣ 📂migrations
 ┗ 📜schema.prisma
src
 ┣ 📜index.ts
 ┗ 📜types.ts
 .env
```

- **components**: Модульные UI-компоненты, организованные по страницам (admin, compare) и общие компоненты (Auth, Header и т.д.).
- **data**: Утилиты и типы для получения данных о комплектующих и проверки совместимости.
- **page**: Компоненты страниц для различных маршрутов.
- **routes**: Логика маршрутизации через Zustand.
- **store**: Zustand-магазин для управления глобальным состоянием (токен, активная вкладка, данные о комплектующих).

## Требования

- **Node.js**: v18 или выше
- **PostgreSQL**: v14 или выше
- **npm**: v8 или выше

## Инструкции по установке

### 1. Клонирование репозитория

```bash
git clone https://github.com/your-repo/pc-configurator.git
cd pc-configurator
```

### 2. Установка зависимостей

Установка зависимотей для frontend

```bash
cd front
npm install
```

Установка зависимостей для backend

```bash
cd back
npm install
```

### 3. Настройка переменных окружения

Создайте файл `.env` в корневой директории и добавьте:

```env
DATABASE_URL="postgresql://user:password@localhost:5432/pc_configurator?schema=public"
VITE_API_URL="http://localhost:5000"
JWT_SECRET="yor-secret-key"
```

- Замените `user`, `password` и `pc_configurator` на ваши учетные данные PostgreSQL и имя базы данных.
- `VITE_API_URL` указывает на адрес backend-сервера.
- Замените секретный ключ или оставьте его.

### 4. Настройка базы данных

Примените миграции Prisma для создания схемы базы данных:

```bash
npx prisma migrate dev --name init
```

Просмотрите схему базы данных с помощью Prisma Studio:

```bash
npx prisma studio
```

Схема включает две основные модели:
- **User**: Хранит данные пользователей (email, пароль, роль и т.д.).
- **Component**: Хранит информацию о комплектующих (название, тип, мощность, сокет и т.д.).

Благодаря просмотра через Prisma Studio вы можете настроить/создать сущности или 
же поменять в них данные. Например: роли пользователей. 

### 5. Запуск backend

Запустите backend-сервер (предполагается, что backend находится в отдельной директории):

```bash
npm run start
```

Backend должен быть доступен по адресу `http://localhost:5000`.

### 6. Запуск frontend

Запустите сервер разработки Vite:

```bash
npm run dev
```

Откройте `http://localhost:5173` в браузере.

### 7. Сборка для продакшена

```bash
npm run build
```

Запустите продакшен-сборку:

```bash
npm run preview
```

## Использование

1. **Главная страница**: Ознакомьтесь с приложением и перейдите на другие страницы.
2. **Страница сравнения**:
   - Войдите или зарегистрируйтесь для доступа.
   - Обязательно смените свою роль с USER на ADMIN в Prisma Studio или же в самой базе данных. Это сделано 
   ради безопасности.
   - Выберите сокет для каждого ПК или же настройте комплектующие сами, подберите комплектующие и нажмите "Сравнить" для оценки производительности ПК.
   - Проверка совместимости гарантирует корректные конфигурации (например, совпадение сокетов процессора и материнской платы).
3. **Страница конфигурации ПК**:
  - Войдите или зарегистрируйтесь для доступа.
  - Выберите сокет для ПК или же настройте комплектующие сами и нажмите "Рассчитать мощность" для оценки производительности ПК.
  - Проверка совместимости гарантирует корректные конфигурации (например, совпадение сокетов процессора и материнской платы).
4. **Панель администратора**:
   - Доступна для пользователей с ролью `ADMIN`.
   - Просматривайте и управляйте пользователями или добавляйте новые комплектующие через форму с выпадающими списками.
5. **Страница "О проекте"**: Узнайте больше о приложении.
6. **Страница авторизации**: Войдите или зарегистрируйтесь для доступа к защищённым функциям.

## API-endpoints

### Аутентификация

- **POST /register**: Регистрация
  - **Тело**: `{ "email": "string", "password": "string" }`
  - **Ответ (201)**: `{ "message": "User created", "userId": 1 }`
  - **Ошибки**: 
    - `400`: "Email и пароль обязательны" / "Этот email уже зарегистрирован"
    - `500`: Ошибка сервера

- **POST /login**: Вход
  - **Тело**: `{ "email": "string", "password": "string" }`
  - **Ответ (200)**: `{ "token": "string" }`
  - **Ошибки**: 
    - `401`: "Invalid credentials"
    - `500`: Ошибка сервера

### Комплектующие

- **GET /components**: Список комплектующих
  - **Требует токен**: Да
  - **Ответ (200)**: `[{ "id": 1, "name": "string", "type": "CPU", "power": 500, ... }]`
  - **Ошибки**: `401` / `403` / `500`

- **GET /components/filter**: Фильтрация комплектующих
  - **Требует токен**: Да
  - **Параметры**: `type`, `socket`, `ramType`, `interface`, `gpuConnector`
  - **Ответ (200)**: `[{ "id": 1, "name": "string", "type": "CPU", ... }]`
  - **Ошибки**: `401` / `403` / `500`

- **GET /components (альтернатива)**: Комплектующие с баллами
  - **Требует токен**: Да
  - **Ответ (200)**: 
    ```json
    {
      "powerScores": { "cpu": { "name": { "power": 500, "socket": "string" } }, ... },
      "sockets": ["string"]
    }
    ```
  - **Ошибки**: `401` / `403` / `500`

- **PUT /admin/components/:id**: Обновление комплектующего
  - **Требует токен**: Да (`ADMIN`)
  - **Тело**: `{ "name": "string", "type": "string", "power": 500, ... }`
  - **Ответ (200)**: `{ "message": "Компонент обновлен", "component": {} }`
  - **Ошибки**: `403` / `500`

- **DELETE /admin/components/:id**: Удаление комплектующего
  - **Требует токен**: Да (`ADMIN`)
  - **Ответ (200)**: `{ "message": "Компонент удален" }`
  - **Ошибки**: `403` / `500`

### Админ

- **GET /admin/users**: Список пользователей
  - **Требует токен**: Да (`ADMIN`)
  - **Ответ (200)**: `[{ "id": 1, "email": "string", "role": "USER", "createdAt": "date" }]`
  - **Ошибки**: `403` / `500`

- **GET /admin/components**: Все комплектующие
  - **Требует токен**: Да (`ADMIN`)
  - **Ответ (200)**: `[{ "id": 1, "name": "string", "type": "CPU", ... }]`
  - **Ошибки**: `403` / `500`

### Прочее

- **GET /compare**: Тест защищённого маршрута
  - **Требует токен**: Да
  - **Ответ (200)**: `{ "message": "This is a protected route", "user": {} }`
  - **Ошибки**: `401` / `403` / `500`

## Примечания
- Токен действителен 24 часа.
- Роль `ADMIN` назначается через Prisma Studio или PostgreSQL.
- Логи ошибок в консоли сервера.


## Настройка ESLint

Проект использует ESLint с поддержкой типизации для строгой проверки кода. Для настройки:

1. Обновите `eslint.config.js` для активации правил с учётом типов:

```js
import tseslint from 'typescript-eslint'

export default tseslint.config({
  languageOptions: {
    parserOptions: {
      project: ['./tsconfig.node.json', './tsconfig.app.json'],
      tsconfigRootDir: import.meta.dirname,
    },
  },
  extends: [
    ...tseslint.configs.recommendedTypeChecked,
    ...tseslint.configs.stylisticTypeChecked,
  ],
})
```

2. Добавьте правила для React:

```js
import react from 'eslint-plugin-react'

export default tseslint.config({
  settings: { react: { version: '18.3' } },
  plugins: { react },
  rules: {
    ...react.configs.recommended.rules,
    ...react.configs['jsx-runtime'].rules,
  },
})
```

3. Установите плагин для React:

```bash
npm install eslint-plugin-react --save-dev
```

## Внесение изменений

Приветствуются любые улучшения! Чтобы внести вклад:

1. Сделайте форк репозитория.
2. Создайте ветку для новой функциональности (`git checkout -b feature/ваша-фича`).
3. Зафиксируйте изменения (`git commit -m "Добавлена новая фича"`).
4. Отправьте ветку в репозиторий (`git push origin feature/ваша-фича`).
5. Откройте Pull Request.

Убедитесь, что ваш код соответствует правилам ESLint и Prettier и сохраняет типобезопасность TypeScript.

## Контакты

По вопросам или для обратной связи пишите на [sypchiknasevere@gmail.com](mailto:sypchiknasevere@gmail.com) или создайте issue на GitHub.

--------------------------------------------------------------------------------------------------------------

*PC Configurator создан для упрощения выбора и сравнения компьютерных комплектующих. Приятного использования!*















# Документация PC Configurator

## Обзор

PC Configurator — это современное веб-приложение для сборки и сравнения конфигураций персональных компьютеров. Пользователи (14–40 лет) могут выбирать комплектующие, проверять их совместимость и сравнивать производительность двух сборок. Приложение включает панель администратора для управления пользователями и компонентами, обеспечивая удобный интерфейс для обычных пользователей и администраторов.

Frontend построен на **React**, **TypeScript** и **Vite**, с использованием **Tailwind CSS** для стилизации и **Zustand** для управления состоянием. Backend использует **Prisma** и **PostgreSQL** для хранения данных. Проект оптимизирован для производительности, типобезопасности и удобства поддержки, с модульной структурой компонентов и строгими типами TypeScript.

## Для пользователей

### Введение
- **Что такое PC Configurator?** Инструмент для сборки и сравнения конфигураций ПК, проверки совместимости комплектующих и расчёта производительности на основе баллов мощности.
- **Для кого?** Для всех от 14 до 40 лет, кто хочет собрать ПК — от новичков до энтузиастов.
- **Основные функции**:
  - Сборка ПК: Выбирайте комплектующие вручную или по сокету с проверкой совместимости.
  - Сравнение ПК: Создайте две конфигурации и сравните их мощность.
  - Аутентификация: Регистрация и вход для доступа к защищённым функциям.
  - Адаптивный дизайн: Работает на компьютерах и мобильных устройствах с бургер-меню для навигации.

### Начало работы
1. **Регистрация и вход**
   - Перейдите на страницу "Авторизация" через меню.
   - **Регистрация**:
     - Введите действующий email и надёжный пароль (например, минимум 6 символов, включая буквы и цифры).
     - Нажмите "Зарегистрироваться" для создания аккаунта.
     - Вам автоматически присваивается роль "USER".
   - **Вход**:
     - Введите email и пароль, затем нажмите "Войти".
     - При успехе вы получите доступ к страницам "Сборка" и "Сравнение".
     - Если появится сообщение "Неверные данные", проверьте email/пароль и попробуйте снова.
   - **Решение проблем**: Если видите "ошибка загрузки", проверьте интернет-соединение или обновите страницу.
2. **Навигация**
   - **Главная**: Обзор приложения и ссылки на другие страницы.
   - **Сборка**: Создание одной конфигурации ПК.
   - **Сравнение**: Сравнение двух конфигураций ПК.
   - **О проекте**: Информация о приложении.
   - **Авторизация**: Регистрация или вход.
   - На мобильных устройствах используйте бургер-меню (три горизонтальные линии) для навигации.

### Сборка ПК
- **Доступ**: Войдите в аккаунт, затем перейдите на страницу "Сборка".
- **Вариант 1: Ручная сборка**
  - Выберите комплектующие (CPU, GPU, RAM, материнская плата, накопитель, блок питания) из выпадающих списков или перечня.
  - Для каждого компонента указаны название, тип и баллы мощности (задаются администратором).
  - Приложение проверяет совместимость (например, сокет процессора совпадает с материнской платой, тип RAM подходит, разъёмы видеокарты совместимы).
  - При несовместимости появится сообщение об ошибке (например, "Сокет не совпадает" или "Несовместимая RAM").
  - Исправьте, выбрав подходящий компонент.
- **Вариант 2: Сборка по сокету**
  - Выберите сокет (например, AM4, LGA 1700) из выпадающего списка.
  - Приложение отфильтрует и покажет только совместимые комплектующие из базы данных.
  - Выберите нужные компоненты для сборки.
- **Расчёт мощности**
  - После выбора всех компонентов нажмите "Рассчитать мощность".
  - Приложение суммирует баллы мощности комплектующих и покажет общий результат.
  - Баллы отражают производительность, заданную администратором.

### Сравнение конфигураций
- **Доступ**: Войдите в аккаунт, перейдите на страницу "Сравнение".
- **Шаги**:
  - Соберите две конфигурации ПК, выбирая комплектующие вручную или по сокету.
  - Приложение проверит совместимость (сокет, тип RAM, разъёмы видеокарты).
  - Если компоненты несовместимы, появится сообщение об ошибке — исправьте выбор.
  - Нажмите "Сравнить" для оценки.
- **Результат**:
  - Увидите сумму баллов мощности для каждой сборки.
  - Сравните значения, чтобы выбрать лучшую конфигурацию.

### Советы
- **Совместимость**: Всегда проверяйте сообщения о несовместимости, чтобы собрать рабочий ПК.
- **Производительность**: Выбирайте комплектующие с высокими баллами мощности для лучшей производительности.
- **Мобильные устройства**: Используйте бургер-меню для удобной навигации.
- **Ошибки**: При сообщении "ошибка загрузки" проверьте соединение с интернетом или обновите страницу.

### Поддержка
- Пишите на [sypchiknasevere@gmail.com](mailto:sypchiknasevere@gmail.com).
- Создавайте issue на GitHub для вопросов или предложений.

---

## Для администраторов

### Введение
- **Роль администратора**: Управление пользователями и комплектующими через панель администратора.
- **Доступ**: Требуется роль "ADMIN".
- **Важно**: Роль "ADMIN" не назначается через приложение. Смена роли пользователя (с "USER" на "ADMIN") выполняется вручную через Prisma Studio или напрямую в PostgreSQL.

### Получение доступа
- **Регистрация**: Создайте аккаунт на странице "Авторизация" с email и паролем.
- **Смена роли**:
  - Откройте Prisma Studio:
    ```bash
    npx prisma studio
    ```
  - Найдите таблицу `User`, выберите ваш аккаунт.
  - Измените поле `role` с "USER" на "ADMIN".
  - Сохраните изменения.
  - Альтернатива: Используйте SQL-запрос в PostgreSQL:
    ```sql
    UPDATE "User" SET role = 'ADMIN' WHERE email = 'ваш@email.com';
    ```
  - Убедитесь, что у вас есть доступ к базе данных.
- **Вход**: Войдите с вашим email и паролем.
- **Проверка**: Перейдите на страницу "Админка" — доступ должен быть открыт.

### Управление пользователями
- **Доступ**: Перейдите на страницу "Админка" после входа с ролью "ADMIN".
- **Функции**:
  - **Просмотр списка**:
    - Увидите таблицу пользователей с полями: id, email, role, createdAt (дата регистрации).
    - Просматривайте данные для отслеживания активности.
  - **Управление**:
    - Приложение не предоставляет функций удаления или редактирования пользователей.
    - Для этого используйте Prisma Studio или PostgreSQL:
      - Удаление: `DELETE FROM "User" WHERE id = <id>;`
      - Изменение: `UPDATE "User" SET email = 'новый@email.com' WHERE id = <id>;`
    - Будьте осторожны, чтобы не удалить важные аккаунты.

### Управление комплектующими
- **Доступ**: Страница "Админка", раздел комплектующих, доступен только для роли "ADMIN".
- **Добавление комплектующих**:
  - Откройте форму добавления.
  - Заполните поля:
    - **Название**: Например, "Intel Core i5-12400".
    - **Тип**: Выберите из списка (CPU, GPU, RAM, Motherboard, Storage, PSU).
    - **Мощность**: Введите баллы мощности (целое число, например, 500).
    - **Сокет**: Укажите (например, LGA 1700) для CPU и материнских плат.
    - **Коннектор**: Для GPU (например, PCIe x16).
    - **Тип RAM**: Для RAM и материнских плат (например, DDR4).
    - **Интерфейс**: Для накопителей (например, SATA, NVMe).
    - **Разъёмы GPU**: Для материнских плат (например, PCIe x16).
  - Используйте выпадающие списки для стандартизированного ввода (данные из базы).
  - Нажмите "Добавить" для сохранения в базе данных.
- **Редактирование комплектующих**:
  - Найдите компонент в списке комплектующих.
  - Нажмите "Редактировать".
  - Измените поля (название, тип, мощность, сокет и т.д.).
  - Нажмите "Сохранить" для обновления.
  - Убедитесь, что данные корректны, чтобы избежать ошибок совместимости.
- **Удаление комплектующих**:
  - Найдите компонент в списке.
  - Нажмите "Удалить".
  - Подтвердите действие.
  - Компонент исчезнет из базы данных, что повлияет на сборки и сравнения.

### Советы
- **Безопасность**: Используйте надёжный `JWT_SECRET` в файле `.env` для защиты токенов.
- **Точность**: Проверяйте баллы мощности и параметры совместимости при добавлении/редактировании.
- **Роли**: Назначайте роль "ADMIN" только доверенным пользователям.
- **Логи**: Проверяйте консоль backend для ошибок (например, 401, 403, 500).

### Поддержка
- Пишите на [sypchiknasevere@gmail.com](mailto:sypchiknasevere@gmail.com).
- Создавайте issue на GitHub.

---
